{"version":3,"sources":["pages/Unloading.js"],"names":["width","mainWindow","current","offsetWidth","withStyles","theme","button","margin","spacing","unit","textFieldSmall","marginLeft","marginRight","textField","urls","maxHeight","overflow","image","maxWidth","message","marginTop","marginBottom","connect","state","table","user","dispatch","tableActions","bindActionCreators","props","classes","useEffect","Object","C_projects_biletiki_biletiki_admin_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__","C_projects_biletiki_biletiki_admin_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default","a","mark","_callee","wrap","_context","prev","next","t0","setCities","getDataSimple","name","t1","sent","stop","this","_useState","useState","_useState2","C_projects_biletiki_biletiki_admin_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","cities","_useState3","_useState4","city","setCity","_useState5","_useState6","events","setEvents","_useState7","descriptionRu","where","date","_useState8","_event","_setEvent","handleCity","_ref2","_callee2","event","_context2","target","value","data","handleEvent","_x","apply","arguments","_ref3","_callee3","_context3","Array","isArray","undefined","split","_x2","react__WEBPACK_IMPORTED_MODULE_3___default","createElement","_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_9___default","select","SelectProps","MenuProps","className","menu","label","type","onChange","map","option","_material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_10___default","key","_id","nameRu","_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_11___default","variant","color","onClick","_callee4","_context4","window","open","call"],"mappings":"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","file":"static/js/22.7f1fcd39.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { getDataSimple, addDataSimple } from '../redux/actions/table'\nimport { getWhere } from '../component/Where/index'\nimport * as tableActions from '../redux/actions/table'\nimport TextField from '@material-ui/core/TextField';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Button from '@material-ui/core/Button';\nimport { Link } from 'react-router-dom'\nimport { mainWindow } from '../App'\nconst width = mainWindow.current.offsetWidth>800? 500: 240;\n\nconst styles = theme => ({\n    button: {\n        margin: theme.spacing.unit,\n    },\n    textFieldSmall: {\n        marginLeft: theme.spacing.unit,\n        marginRight: theme.spacing.unit,\n        width: width,\n    },\n    textField: {\n        marginLeft: theme.spacing.unit,\n        marginRight: theme.spacing.unit,\n        width: width\n    },\n    urls: {\n        margin: theme.spacing.unit,\n        width: width,\n        maxHeight: 100,\n        overflow: 'auto'\n    },\n    image: {\n        marginLeft: theme.spacing.unit,\n        marginRight: theme.spacing.unit,\n        maxWidth: 500,\n        maxHeight: 500\n    },\n    message: {\n        width: width,\n        marginTop: theme.spacing.unit,\n        marginBottom: theme.spacing.unit,\n        marginLeft: 'calc((100% - '+width+'px)/2)',\n        marginRight: 'calc((100% - '+width+'px)/2)'\n    },\n});\n\nconst Cashbox = (\n    (props) =>{\n        const { classes } = props;\n        useEffect(()=>{(async()=>{\n            /*if (!(status.status==='active'&&['admin', 'manager', 'cashier', 'organizator'].includes(status.role))) {\n                props.history.push('/')\n            }*/\n            await setCities(await getDataSimple({name: 'Города'}));\n        })()},[])\n        let [cities, setCities] = useState([]);\n        let [city, setCity] = useState('');\n        let [events, setEvents] = useState([]);\n        let [_event, _setEvent] = useState({descriptionRu: '', where: {}, date: []});\n        let handleCity = async(event) => {\n            setCity(event.target.value)\n            setEvents(await getDataSimple({name: 'СобытиеГородВсе', data: {city: event.target.value}}));\n            handleEvent({target: {value: {descriptionRu: '', where: {}, date: []}}})\n        };\n        let handleEvent = async(event) => {\n            let _event = event.target.value;\n            if(!Array.isArray(_event.descriptionRu)&&_event.descriptionRu!==undefined)\n                _event.descriptionRu = _event.descriptionRu.split('|');\n            await _setEvent(_event)\n        };\n        return (\n            <div>\n                <TextField\n                    select\n                    SelectProps={{\n                        MenuProps: {\n                            className: classes.menu,\n                        },\n                    }}\n                    label='город'\n                    type='login'\n                    className={classes.textField}\n                    margin='normal'\n                    value={city}\n                    onChange={handleCity}\n                >\n                    {cities != undefined?\n                        cities.map(option => (\n                            <MenuItem key={option} value={option}>\n                                {option}\n                                </MenuItem>\n                        ))\n                        :\n                        null\n                    }\n                </TextField>\n                <br/>\n                <TextField\n                    select\n                    SelectProps={{\n                        MenuProps: {\n                            className: classes.menu,\n                        },\n                    }}\n                    label='событие'\n                    type='login'\n                    className={classes.textField}\n                    margin='normal'\n                    value={_event}\n                    onChange={handleEvent}\n                >\n                    {events != undefined?\n                        events.map(option => {\n                            return (<MenuItem key={option._id} value={option}>\n                                {option.nameRu}\n                            </MenuItem>)\n                        })\n                        :\n                        null\n                    }\n                </TextField>\n                <br/>\n                <Button variant='contained' color='secondary' className={classes.button} onClick={async()=>{\n                    window.open(await getDataSimple({name: 'Выгрузка', data: {event: _event.nameRu}}), '_blank');\n                }}>\n                    Скачать\n                </Button>\n                <br/>\n            </div>\n        );\n  })\n\nfunction mapStateToProps (state) {\n    return {\n        table: state.table,\n        user: state.user,\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        tableActions: bindActionCreators(tableActions, dispatch),\n    }\n}\n\nCashbox.propTypes = {\n    classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(connect(mapStateToProps, mapDispatchToProps)(Cashbox));\n"],"sourceRoot":""}