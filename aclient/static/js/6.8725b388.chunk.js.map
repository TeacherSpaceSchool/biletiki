{"version":3,"sources":["page/Event.js"],"names":["Event","React","memo","props","_props$app","app","lang","city","_useState","useState","_useState2","Object","C_projects_biletiki_biletiki_client_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__","event","setEvent","_useState3","_useState4","date","setDate","useEffect","C_projects_biletiki_biletiki_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","C_projects_biletiki_biletiki_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee","data","i","wrap","_context","prev","next","getOther","name","search","location","pathname","split","skip","sent","events","length","dateTime","realDate","sort","Date","splice","price","b","parseInt","undefined","descriptionRu","Array","isArray","descriptionKg","history","push","window","reload","stop","this","react__WEBPACK_IMPORTED_MODULE_3___default","createElement","Fragment","react_helmet__WEBPACK_IMPORTED_MODULE_10__","charSet","nameRu","nameKg","property","content","className","src","imageThumbnail","alt","ageCategory","onChange","event1","target","selectedIndex","selected","disabled","hidden","map","element","idx","onClick","stringifyDateTime","react_router_dom__WEBPACK_IMPORTED_MODULE_7__","scrollToTop","to","where","alert","genre","video","width","height","frameBorder","allow","allowFullScreen","connect","state","user","dispatch","appActions","bindActionCreators"],"mappings":"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","file":"static/js/6.8725b388.chunk.js","sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport { getOther } from '../redux/actions/app'\r\nimport { connect } from 'react-redux'\r\nimport * as appActions from '../redux/actions/app'\r\nimport { bindActionCreators } from 'redux'\r\nimport { Link } from 'react-router-dom'\r\nimport { scrollToTop } from '../App'\r\nimport { stringifyDateTime } from '../redux/constants/other'\r\nimport {Helmet} from 'react-helmet';\r\n\r\nconst Event =  React.memo(\r\n    (props) =>{\r\n        const { lang, city } = props.app;\r\n        let [event, setEvent] = useState({});\r\n        let [date, setDate] = useState({});\r\n        useEffect(async ()=>{\r\n            let data = await getOther({name: 'СобытиеПоНазванию', data: {city: city, search: props.location.pathname.split('/')[2], skip: 0}});\r\n            if(data.events.length>0){\r\n                data = data.events[0];\r\n                data.dateTime = data.realDate.sort();\r\n                for(let i=0; i<data.dateTime.length; i++){\r\n                    if(new Date(data.dateTime[i])<new Date()){\r\n                        data.dateTime.splice(i, 1)\r\n                    }\r\n                }\r\n                setDate(data.dateTime[0])\r\n                data.price.sort(function(a, b){return parseInt(a.price) - parseInt(b.price)});\r\n                if(data.descriptionRu!==undefined && !Array.isArray(data.descriptionRu)){\r\n                    data.descriptionRu = data.descriptionRu.split('|');\r\n                    data.descriptionKg = data.descriptionKg.split('|');\r\n                }\r\n                await setEvent(data)\r\n            } else {\r\n                props.history.push('/');\r\n                window.location.reload();\r\n            }\r\n        },[]);\r\n        let handleMerchant =  (event1) => {\r\n            setDate(event.dateTime[event1.target.selectedIndex-1])\r\n        };\r\n        return (\r\n            <>\r\n            <Helmet>\r\n                <meta charSet=\"utf-8\" />\r\n                <title>{lang==='ru'? event.nameRu : event.nameKg}</title>\r\n                <meta property=\"og:title\" content={lang==='ru'? event.nameRu : event.nameKg} />\r\n            </Helmet>\r\n            <div className='main-buy'>\r\n                <div className='container'>\r\n                    <div className='row'>\r\n                        <div className='col-md-8 content-wrap'>\r\n                            <div className='content'>\r\n                                <div className='event-image'>\r\n                                    <img src={event.imageThumbnail} alt />\r\n                                </div>\r\n                                <div className='event-content'>\r\n                                    <div className='event-content_title'>\r\n                                        <h1>\r\n                                            {lang==='ru'? event.nameRu : event.nameKg}\r\n                                        </h1>\r\n                                        <div className='icons'>\r\n                                            <div className='age'>\r\n                                                <span>{event.ageCategory}</span>\r\n                                                <div className='hint'>{lang==='ru'? 'Рекомендованный возраст' : 'Cунушталган жашы'}</div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className='event-content_info'>\r\n                                        <div className='date-dropdown'>\r\n                                            <div className='input-group'>\r\n                                                <select onChange={handleMerchant} className='custom-select'>\r\n                                                    <option selected disabled hidden>{lang==='ru'? 'Выбрать дату' : 'Тандоо датасы'}</option>\r\n                                                    {event.realDate!==undefined?event.realDate.map((element, idx) => {\r\n                                                            return (\r\n                                                                <option onClick={()=>{setDate(event.dateTime[idx])}}>{stringifyDateTime(element)}</option>\r\n                                                            )\r\n                                                    }):null\r\n                                                    }\r\n                                                </select>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className='place'>\r\n                                            <div className='place_name'>\r\n                                                <Link onClick={()=>{scrollToTop()}}  to={event.where!==undefined?'/hall/'+event.where.name:''}><a>{event.where!==undefined?event.where.name:null}</a></Link>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className='cost'>\r\n                                            {lang==='ru'? 'Стоимось билетов:' : 'Стоимось билетов:'}\r\n                                            <span>{event.price!==undefined?event.price[0].price:null} - {event.price!==undefined?event.price[event.price.length-1].price:null} сом</span>\r\n                                        </div>\r\n                                        <div className='payment-method-icon'>\r\n                                        </div>\r\n                                        <div className='button-buy'>\r\n                                            {\r\n                                                date?\r\n                                                    <Link onClick={()=>{scrollToTop()}}  to={'/selectplace/'+(lang==='ru'? event.nameRu : event.nameKg)+'&'+date}><a>{lang==='ru'? 'Купить' : 'Билет сатып алуу:'}</a></Link>\r\n                                                    :\r\n                                                    <a onClick={()=>{alert('Пожалуйста выберите дату!!!')}}>{lang==='ru'? 'Купить' : 'Билет сатып алуу'}</a>\r\n                                            }\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div className='event-description'>\r\n                                <h2 className='description_title'><span>{lang==='ru'? 'Описание' : 'Баяндоо'} </span></h2>\r\n                                <div className='description_content'>\r\n                                    <p><strong>{lang==='ru'? event.nameRu : event.nameKg} </strong></p>\r\n                                    <p>{lang==='ru'? 'Жанр' : 'Жанр'}: {event.genre} </p>\r\n                                    <p>{lang==='ru'? 'Возрастное ограничение' : 'Курактык чеги'}: {event.ageCategory}</p>\r\n                                    {event.price!==undefined?(lang==='ru'? event.descriptionRu : event.descriptionKg ).map((element) => {\r\n                                        return <p>{element}</p>\r\n                                    }):null}\r\n                                </div>\r\n                                {event.video!==undefined&&event.video.length>0?\r\n                                    <div className='video-wrap'>\r\n                                        <iframe width='100%' height={360} src={event.video} frameBorder={0} allow='accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture' allowFullScreen />\r\n                                    </div>\r\n                                    :\r\n                                    null\r\n                                }\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>     </>\r\n        );\r\n    }\r\n)\r\n\r\nfunction mapStateToProps (state) {\r\n    return {\r\n        user: state.user,\r\n        app: state.app\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        appActions: bindActionCreators(appActions, dispatch),\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Event);\r\n"],"sourceRoot":""}